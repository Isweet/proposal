\chapter{\obliv, A Language for Probabilistically Oblivious Computation}
\label{ch:lam-obliv}

An oblivious computation is one that is free of direct and indirect information leaks, e.g., due to observable differences
in timing and memory access patterns. In this chapter, we'll give a formal description of \obliv, a core language whose
type system enforces obliviousness. We show that \obliv satisfies~\nameref{thm:obliv-pmto}, a probabilistic variant of obliviousness.
We also show that \obliv's type system is expressive enough to typecheck an asymptotically optimal client-server ORAM implementation.

\section{Overview}
\label{sec:lam-obliv-overview}

The syntax of \obliv is presented in \Cref{fig:obliv-syntax}. \obliv types comprise a
series of standard types---integers, booleans, functions, and pair types---as well as
a special type for secret, uniform distributions of booleans.

Fâ…
\begingroup
\setlength\arraycolsep{0pt} % default is 6pt
\smaller
Dâ…
Mâ…
AËrcrcl@{â }l
Aâ… b   â§¼âˆˆâ§½ ğ”¹           â§¼ â§½                               & âŸªbooleansâŸ«
Aâƒ i   â§¼âˆˆâ§½ â„¤           â§¼ â§½                                & âŸªintegersâŸ«
Aâƒ â„“   â§¼âˆˆâ§½ â€¹labelâ€º     â§¼â©´â§½ â€¹Pâ€º Â¦ â€¹Sâ€º                     & âŸªpublic and secretâŸ«
Aâƒ     â§¼ â§½ ğ‘šğ‘3c{âŸª(Â«whereÂ» â¸¨â€¹Pâ€ºâŠâ€¹Sâ€ºâ¸©)âŸ«}                   & âŸªsecurity labelsâŸ«
Aâƒ Ï   â§¼âˆˆâ§½ R           â§¼ â§½                               & âŸªprobability regionâŸ«
Aâƒ Î¼   â§¼âˆˆâ§½ â€¹base-typeâ€º â§¼â©´â§½ â¦‘intâ¦’                         & âŸªinteger typeâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ â¦‘boolâ¦’                         & âŸªboolean typeâŸ«
Aâƒ Ï„   â§¼âˆˆâ§½ â€¹typeâ€º      â§¼â©´â§½ Î¼â¸¤â„“â¸¥â¸¢Ïâ¸£                        & âŸªnon-random base typeâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ â¦‘Â½â¦’ Î¼â¸¤â€¹Sâ€ºâ¸¥â¸¢Ïâ¸£                   & âŸªsecret uniform boolâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ Ï„ Ã— Ï„                          & âŸªtupleâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ Ï„ â†’ Ï„                          & âŸªfunctionâŸ«
Aâƒ x,y â§¼âˆˆâ§½ â€¹varâ€º       â§¼ â§½                                 & âŸªvariablesâŸ«
Aâƒ âŠ™   â§¼âˆˆâ§½ â€¹binopâ€º     â§¼ â§½                                & âŸªbinary operations (e.g., plus, times)âŸ«
Aâƒ e   â§¼âˆˆâ§½ â€¹exprâ€º      â§¼â©´â§½ x                              & âŸªvariable referenceâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ iâ¸¤â„“â¸¥                            & âŸªinteger literalâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ bâ¸¤â„“â¸¥                            & âŸªboolean literalâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ e âŠ™ e                          & âŸªbinary operationâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ e Â¿ e â—‡ e                      & âŸªatomic conditionalâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ âŸ¨e,eâŸ©                           & âŸªtuple creationâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ â¦‘letâ¦’â£x,y = eâ£â¦‘inâ¦’â£e            & âŸªtuple eliminationâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ Î»â¸¤zâ¸¥xâª e                       & âŸª(recursive) function creationâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ â¦‘unifâ¦’â¸¢Ïâ¸£â£Î¼                      & âŸªuniform, random sample in regionâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ â¦‘castâ¦’â¸¤lâ¸¥â£x                    & âŸªcast from uniformâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ eâ£e                            & âŸªfunction eliminationâŸ«
Aâƒ     â§¼ â§½             â§¼Â¦â§½ â¦‘letâ¦’â£x = eâ£â¦‘inâ¦’â£e               & âŸªvariable bindingâŸ«
Aâ†
Mâ†
Dâ†
\endgroup
\caption{\obliv Syntax}
\label{fig:obliv-syntax}
Fâ†

\section{Obliviousness}
\label{sec:lam-obliv-obliviousness}

\ins{The goal is to sufficiently explain~\nameref{thm:obliv-pmto}.}

\begin{theorem}[PMTO] \label{thm:obliv-pmto}
  If â¸¨eâ‚ : Ï„â¸©, â¸¨eâ‚‚ : Ï„â¸©, â¸¨eâ‚ â‰ˆâ¸¤lâ¸¥ eâ‚‚â¸©, â¸¨eâ‚ â€”â†’â‹† â‡¡~{tâ‚}â¸©, and â¸¨eâ‚‚ â€”â†’â‹† â‡¡~{tâ‚‚}â¸©, then â¸¨â‡¡~{tâ‚} â‡¡~â‰ˆâ¸¤lâ¸¥ â‡¡~{tâ‚‚}â¸©.
\end{theorem}

In other words, if two expressions cannot be distinguished from each other, then neither can the distributions of memory traces
that their executions emit.
